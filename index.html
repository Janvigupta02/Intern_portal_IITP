<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intern Portal – IIT Patna</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.0.0/remixicon.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#0A2463'
          },
          borderRadius: {
            button: '8px'
          }
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .card-glassmorphism {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 4px 20px rgba(10, 36, 99, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card-glassmorphism:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(10, 36, 99, 0.15);
    }
  </style>
</head>
<body class="bg-gray-50">

  <!-- ✅ Navbar -->
  <nav class="bg-white shadow-md fixed w-full z-50">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
      <div class="font-['Pacifico'] text-primary text-2xl">IITP</div>
      <div class="text-gray-800 font-semibold text-lg">Intern Portal</div>
    </div>
  </nav>

  <!-- ✅ Page Title -->
  <div class="pt-24 text-center mb-6">
    <h1 class="text-3xl font-bold text-primary">Explore Our Interns</h1>
    <p class="text-gray-600">Guided by Dr. Rahul Mishra, IIT Patna</p>
  </div>

  <div class="max-w-6xl mx-auto px-4 mb-6 flex justify-end gap-3">
  <button onclick="openModal('add-intern')" class="bg-primary text-white px-4 py-2 rounded-button hover:bg-opacity-90 transition">
    + Add Intern
  </button>
  <button onclick="exportToCSV()" class="bg-green-600 text-white px-4 py-2 rounded-button hover:bg-green-700 transition">
    Export CSV
  </button>
</div>


  <!-- ✅ Intern Cards Grid -->
  <div id="internGrid" class="max-w-6xl mx-auto px-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-20">
    <!-- Sample Card -->
    <div class="card-glassmorphism rounded-lg p-5">
      <h3 class="text-xl font-bold text-primary mb-2">Srishti Pathak</h3>
      <p class="text-gray-600 mb-1">CUJ | Batch 2025</p>
      <p class="text-gray-500 text-sm mb-1">Intern portal</p>
      <p class="text-gray-500 text-sm mb-1">May – July 2025</p>
      <p class="text-blue-600"><a href="https://linkedin.com/in/srishtipathak" target="_blank">LinkedIn</a></p>
      <p class="text-blue-600"><a href="https://github.com/srishtipathak" target="_blank">GitHub</a></p>
    </div>
  </div>

  <div id="add-intern-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-center items-center">
    <div class="bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-2xl relative">
      <button onclick="closeModal('add-intern')" class="absolute top-2 right-4 text-gray-600 text-2xl">&times;</button>
      <h2 class="text-2xl font-bold text-primary mb-4">Add New Intern</h2>
      <form id="addInternForm" class="grid grid-cols-1 gap-4">
        <input type="text" id="name" placeholder="Full Name" required class="border border-gray-300 rounded px-3 py-2" />
        <input type="text" id="university" placeholder="University" required class="border border-gray-300 rounded px-3 py-2" />
        <input type="text" id="batch" placeholder="Batch Year" required class="border border-gray-300 rounded px-3 py-2" />
        <input type="text" id="duration" placeholder="Internship Duration" required class="border border-gray-300 rounded px-3 py-2" />
        <input type="text" id="project" placeholder="Project Title" required class="border border-gray-300 rounded px-3 py-2" />
        <input type="url" id="linkedin" placeholder="LinkedIn Profile URL" class="border border-gray-300 rounded px-3 py-2" />
        <input type="url" id="github" placeholder="GitHub Profile URL" class="border border-gray-300 rounded px-3 py-2" />
        <button type="submit" class="bg-primary text-white px-4 py-2 rounded-button">Add Intern</button>
      </form>
    </div>
  </div>

 <script>
  let editingIndex = null;

  function openModal(id) {
    document.getElementById(`${id}-modal`).classList.remove('hidden');
  }

  function closeModal(id) {
    document.getElementById(`${id}-modal`).classList.add('hidden');
    editingIndex = null;
    document.getElementById("addInternForm").reset();
  }

  function renderInternCard(intern, index) {
    const card = document.createElement("div");
    card.className = "card-glassmorphism rounded-lg p-5";
    card.innerHTML = `
      <h3 class="text-xl font-bold text-primary mb-2">${intern.name}</h3>
      <p class="text-gray-600 mb-1">${intern.university} | Batch ${intern.batch}</p>
      <p class="text-gray-500 text-sm mb-1">${intern.project}</p>
      <p class="text-gray-500 text-sm mb-1">${intern.duration}</p>
      ${intern.linkedin ? `<p class="text-blue-600"><a href="${intern.linkedin}" target="_blank">LinkedIn</a></p>` : ''}
      ${intern.github ? `<p class="text-blue-600"><a href="${intern.github}" target="_blank">GitHub</a></p>` : ''}
      <div class="mt-3 flex gap-3">
        <button onclick="editIntern(${index})" class="text-sm bg-blue-500 text-white px-3 py-1 rounded">Edit</button>
        <button onclick="deleteIntern(${index})" class="text-sm bg-blue-600 text-white px-3 py-1 rounded">Delete</button>
      </div>
    `;
    document.getElementById("internGrid").appendChild(card);
  }

  function editIntern(index) {
    const interns = JSON.parse(localStorage.getItem("interns") || "[]");
    const intern = interns[index];

    document.getElementById("name").value = intern.name;
    document.getElementById("university").value = intern.university;
    document.getElementById("batch").value = intern.batch;
    document.getElementById("duration").value = intern.duration;
    document.getElementById("project").value = intern.project;
    document.getElementById("linkedin").value = intern.linkedin;
    document.getElementById("github").value = intern.github;

    editingIndex = index;
    openModal("add-intern");
  }

  function deleteIntern(index) {
    const interns = JSON.parse(localStorage.getItem("interns") || "[]");
    if (confirm("Are you sure you want to delete this intern?")) {
      interns.splice(index, 1);
      localStorage.setItem("interns", JSON.stringify(interns));
      renderAllInterns();
    }
  }

  function renderAllInterns() {
    document.getElementById("internGrid").innerHTML = "";
    const interns = JSON.parse(localStorage.getItem("interns") || "[]");
    interns.forEach((intern, index) => renderInternCard(intern, index));
  }

  window.addEventListener("DOMContentLoaded", renderAllInterns);

  document.getElementById("addInternForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const intern = {
      name: document.getElementById("name").value,
      university: document.getElementById("university").value,
      batch: document.getElementById("batch").value,
      duration: document.getElementById("duration").value,
      project: document.getElementById("project").value,
      linkedin: document.getElementById("linkedin").value,
      github: document.getElementById("github").value
    };

    let interns = JSON.parse(localStorage.getItem("interns") || "[]");

    if (editingIndex !== null) {
      interns[editingIndex] = intern;
    } else {
      interns.push(intern);
    }

    localStorage.setItem("interns", JSON.stringify(interns));
    renderAllInterns();
    document.getElementById("addInternForm").reset();
    closeModal("add-intern");
  });

  function exportToCSV() {
    const interns = JSON.parse(localStorage.getItem("interns") || "[]");
    if (interns.length === 0) {
      alert("No interns to export!");
      return;
    }

    const header = Object.keys(interns[0]);
    const rows = interns.map(intern => header.map(key => `"${(intern[key] || "").replace(/"/g, '""')}"`).join(','));

    const csvContent = [header.join(','), ...rows].join('\n');
    const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "interns.csv";
    a.click();
    URL.revokeObjectURL(url);
  }
</script>

</body>
</html>
